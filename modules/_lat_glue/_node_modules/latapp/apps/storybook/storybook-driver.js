$(document).ready(function() {
  
  //Clear the node content
  var content = $(jsPathContainer);
  content.empty();
    
//  // Test 2a: Display node data using "latAppData" global variable
//  // Print he embed code for each image
//  var notebook = latAppData['notebook'];
//  var taggedImages = latAppData['taggedImages'];
//  var numPages = taggedImages.length;
//  $.each(taggedImages, function(index, taggedImage){
//    content.append('<div>' + taggedImage['embedCode'] + '</div>');
//  });

//  // Test 2b: Display node data using REST request.
//  if (content.attr('id')) {
//    var nid = content.attr('id').split('-')[1];
//    $.get(
//    '/notebook/json/' + nid, {},
//    function(result){
//      var container = $('div.node-page');
//      var book = new LatAppBook(container);
//      book.updateDisplay();
//    },
//    'json'
//    );
//  }
  
  // Test 3: Print the book object
  
  // Prepare book pages
  var taggedImages = latAppData['taggedImages'];
  var bookPages = new Array();
  $.each(taggedImages, function(index, taggedImage){
    image = taggedImage['embedCode'];
    writing = taggedImage['writing'];
    bookPages.push(new LatAppStorybookPage(image, writing));
  });
  if (bookPages.length % 2 != 0) {
    bookPages.push(new LatAppStorybookPage('',''));
  }

  // Prepare the book
  var container = $(jsPathContainer);
  var book = new LatAppBook(container);
  book.pageRightBinder = bookPages.reverse();

  // Turn right pages to far left side, without replacing left binder.
  book.pageLeft = book.pageRightBinder.pop();
  book.pageLeft.container = book.boundPageLeft;
  book.pageLeft.updateDisplay();
  
  // Turn right pages to right side, without replacing left binder.
  book.pageRight = book.pageRightBinder.pop();
  book.pageRight.container = book.boundPageRight;
  book.pageRight.updateDisplay();
  
  // Refresh book display
  book.updateDisplay();
  
});
