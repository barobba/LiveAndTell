<?php

function latmediaref_views_handlers() {
  return array(
    // Context for the handlers
    'info' => array(
      'path' => drupal_get_path('module', 'latmediaref') . '/views_handlers', 
    ),
    // Handler inheritance
    'handlers' => array(
      'latmediaref_handler_field_image' => array(
        'parent' => 'content_handler_field',
      ),
    ),
  );  
}

function latmediaref_views_data() {
  $data = array();
  $field = content_fields('field_media_handler', '');
  foreach (content_fields() as $field) {
    
    $module = $field['module'];
    $result = (array) module_invoke($module, 'field_settings', 'views data', $field);
    drupal_alter('field_settings', $result, 'views data', $field);
    if (empty($result)) {
      $result = content_views_field_views_data($field);
    }
    if (is_array($result)) {
      $data = array_merge($data, $result);
    }
    
  }
  return $data;
}
